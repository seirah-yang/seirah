<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê¸°ë¡ì´ ì‚¬ëŒì„ ë§Œë“ ë‹¤</title>
  <link rel="icon" type="image/png" href="public/note.png">

  <style>
    body {
      font-family: 'ë‚˜ëˆ”ì†ê¸€ì”¨ ê°€ëŒì—°ê½ƒ', sans-serif;
      background-color: #ffffff;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 6px 10px rgba(54, 1, 41, 0.15);
    }

    input, textarea {
      width: 95%;
      margin-bottom: 10px;
      padding: 10px;
      font-size: 15px;
      border: 1px solid #faf7f7;
      border-radius: 8px;
    }

    button {
      padding: 5px 10px;
      font-size: 14px;
      font-weight: bold;
      border: 1px;
      border-radius: 35px;
      margin-right: 0px;
      background-color: #152b16;
      color: rgb(255, 255, 255);
      cursor: pointer;
    }

    button:hover {
      background-color: #4f9753;
    }

    .memo-date {
      font-weight: bold;
      font-size: 18px;
      margin-top: 10px;
      margin-bottom: 4px;
      color: #393636;
      border-bottom: 1px solid #d0caca;
      padding-bottom: 5px;
    }

    .memo {
      background: #fefefe;
      border: 1px solid #ddd;
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 10px;
    }

    .memo-actions button {
      background-color: #b5b5b5;
      font-weight: bold;
      color: rgb(14, 13, 13);
      margin-right: 0px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2> ğŸ“‘ ì˜¤ëŠ˜ í•˜ë£¨ ê¸°ë¡</h2>
    <link rel="icon" type="image/png" href="public/note.png">
    <input type="text" id="title" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
    <textarea id="content" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" rows="7"></textarea><br>
    <button onclick="saveMemo()">ì €ì¥</button>
    <button onclick="clearAll()">ì‚­ì œ</button>

    <h4 style="margin-top:30px;"></h4>
    <div id="memoList_memosave"></div>
  </div>

  <script>
    let editIndex = null;
    function getMemos() {
      const memos = localStorage.getItem('memoList_memosave');
      return memos ? JSON.parse(memos) : [];
    }

    function saveMemo() {
      const title = document.getElementById('title').value.trim();
      const content = document.getElementById('content').value.trim();
      if (!title || !content) {
        alert("ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
      }

      const memos = getMemos();

      if (editIndex !== null) {
        memos[editIndex].title = title;
        memos[editIndex].content = content;
        editIndex = null;
      } else {
        const newMemo = {
          title,
          content,
          timestamp: new Date().toLocaleString()
        };
        memos.push(newMemo);
      }

      localStorage.setItem('memoList_memosave', JSON.stringify(memos));
      resetInput();
      renderMemos();
    }

    function resetInput() {
      document.getElementById('title').value = "";
      document.getElementById('content').value = "";
    }

    function clearAll() {
      if (confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        localStorage.removeItem('memoList_memosave');
        renderMemos();
      }
    }

    function deleteMemo(index) {
      const memos = getMemos();
      memos.splice(index, 1);
      localStorage.setItem('memoList_memosave', JSON.stringify(memos));
      renderMemos();
    }

    function editMemo(index) {
      const memos = getMemos();
      const memo = memos[index];
      document.getElementById('title').value = memo.title;
      document.getElementById('content').value = memo.content;
      editIndex = index;
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function renderMemos() {
      const memos = getMemos();
      const memoList_memosave = document.getElementById('memoList_memosave');
      memoList_memosave.innerHTML = '';

      const grouped = {};

      memos.forEach((memo, index) => {
        const dateKey = memo.timestamp.split(' ')[0];
        if (!grouped[dateKey]) grouped[dateKey] = [];
        grouped[dateKey].push({ ...memo, index });
      });

      Object.keys(grouped).sort((a, b) => b.localeCompare(a)).forEach(date => {
        const section = document.createElement('div');
        const dateHeader = document.createElement('div');
        dateHeader.className = 'memo-date';
        dateHeader.innerText = date;
        section.appendChild(dateHeader);

        grouped[date].forEach(memo => {
          const memoDiv = document.createElement('div');
          memoDiv.className = 'memo';
          memoDiv.innerHTML = `
            <strong>${memo.title}</strong> <small>(${memo.timestamp})</small>
            <p>${memo.content}</p>
            <div class="memo-actions">
              <button onclick="editMemo(${memo.index})">ìˆ˜ì •</button>
              <button onclick="deleteMemo(${memo.index})">ì‚­ì œ</button>
            </div>
          `;
          section.appendChild(memoDiv);
        });

        memoList_memosave.appendChild(section);
      });
    }

    window.onload = renderMemos;
  </script>
</body>
</html>
